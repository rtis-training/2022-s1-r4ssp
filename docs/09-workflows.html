<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Workflows</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R4SSP Semester 1 2022</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Modules
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Intro</li>
    <li>
      <a href="01-intro.html">Intro to R and RStudio</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Data Focus</li>
    <li>
      <a href="02-visualise.html">Part 1: Visualising</a>
    </li>
    <li>
      <a href="03-subset.html">Part 2: Subsetting</a>
    </li>
    <li>
      <a href="04-summarise.html">Part 3: Summarising</a>
    </li>
    <li>
      <a href="05-transform.html">Part 4: Transforming</a>
    </li>
    <li>
      <a href="06-communicate.html">Part 5: Communicating</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Programming focus</li>
    <li>
      <a href="07-functions.html">Functions and Choices</a>
    </li>
    <li>
      <a href="08-iterate.html">Repeating Code</a>
    </li>
    <li>
      <a href="09-workflows.html">Workflows</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Zoom Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="zoom_notes_01.html">01 - Introducing R and RStudio</a>
    </li>
    <li>
      <a href="zoom_notes_02.html">02 - Visualising data</a>
    </li>
    <li>
      <a href="zoom_notes_03.html">03 - Subsetting data</a>
    </li>
    <li>
      <a href="zoom_notes_04.html">04 - Summarising data</a>
    </li>
    <li>
      <a href="zoom_notes_05.html">05 - Transforming data</a>
    </li>
    <li>
      <a href="zoom_notes_06.html">06 - Communicating data</a>
    </li>
    <li>
      <a href="zoom_notes_07.html">07 - Functions and Choices</a>
    </li>
    <li>
      <a href="zoom_notes_08.html">08 - Repeating Code</a>
    </li>
    <li>
      <a href="zoom_notes_09.html">09 - Workflows</a>
    </li>
  </ul>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Workflows</h1>
<h4 class="date">Semester 1, 2022</h4>

</div>


<blockquote>
<h4 id="associated-material">Associated Material</h4>
<p>Zoom Notes: <a href="zoom_notes_09.html">Zoom Notes 09 -
Workflows</a></p>
</blockquote>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this module we’re going to cover some ways to improve your
workflow as you use R. As you develop your understanding of R and
proceed to do fancier things, you’ll want to start bringing in extra
features to make your life easier.</p>
<p>When we think of a workflow there are three main phases we undertake.
At the very beginning we’re setting ourselves up, establishing how
things will be organised, and how we intend to work. Second, we do the
work - which involves testing and adjusting the established systems, and
lastly, we wrap things up.</p>
<p><br />
</p>
</div>
<div id="getting-organised" class="section level2">
<h2>Getting organised</h2>
<p>In the first module we discussed creating a structure for your work
inside an RStudio project. For both analysis and programming projects it
is useful to have a pre-established ‘go-to’ template structure to keep
things organised.</p>
<p>An overarching principle is “keep similar things together”. For an
analysis project, this can mean the structure we first covered when
setting up an RStudio Project:</p>
<pre><code>My_Project/
  |- data/
  |- docs/
  |- output/
  \- scripts/</code></pre>
<p>Beyond the structure of where we put things, we also want to
establish the principles of how the project will operate. Two important
files in this regard are the README and the LICENSE. The README will
tell yourself and others important details about the project such as
where the source data came from, or how to run the code in the project
(e.g. order of scripts). Secondly, a LICENSE - this will become
important later on when code you have written may be released for others
to see (e.g. as part of a research paper) as it will set out the rules
under which people may use your code.</p>
<p><br />
</p>
<div id="licensing" class="section level3">
<h3>Licensing</h3>
<p>When we’re dealing with research, by and large we’re operating in an
“open source” manner - i.e. the code that is used to perform the
research is shared alongside the results so that people can view it.
Just because the code is available doesn’t mean that people get to do
what they like with your code though.</p>
<p>It’s always a good practice to add a license to go along with your
code. A license is a document that lets people who come across the code
know what they’re allowed to do with it, and what they’re not. There are
many open source licenses available and they vary in what behaviours
they permit or restrict. When choosing an open source licence there are
3 main questions you need to answer:</p>
<ol style="list-style-type: decimal">
<li>Do you care about how any modifications that people make to the code
are distributed?</li>
<li>Do you or your institution own any related software patents?</li>
<li>Do you care about the way your name is or isn’t mentioned when
someone makes use of your code?</li>
</ol>
<p>An extremely common license in research code/software is the MIT
license which is the simplest and most permissive, and essentially says
the code is “as is” without any warranties, and lets people use, copy,
modify, and distribute your code so long as the copyright notice goes
along with it (i.e. for attribution purposes). For help selecting an
appropriate license have a look at <a
href="https://choosealicense.com">https://choosealicense.com</a>.</p>
<p><br />
</p>
</div>
<div id="the-usethis-package" class="section level3">
<h3>The <code>usethis</code> Package</h3>
<p>The <a href="https://usethis.r-lib.org"><code>usethis</code></a>
package is designed to assist in the creation of new packages and
setting up of new projects. It is an extremely useful package for
several “workflow” tasks. It provides functions for many common workflow
tasks such as creating new projects, adding README files, or opening R
files.</p>
<pre class="r"><code># Create and open a new package
usethis::create_project(path = &quot;path/to/new/project&quot;)

# Create a markdown README
usethis::use_readme_md()

# Create an RMarkdown README
usethis::use_readme_rmd()

# Create a new R script in your project in directory R/
usethis::use_r(name = &quot;myfile.R&quot;)
</code></pre>
<p>On top of these, there are many other helper functions, such as for
creating various licenses, editing configurations, interacting with
version control software, or setting up automatic testing. All of which
we’ll touch on in this module.</p>
<p>Once you have chosen an appropriate license, <code>usethis</code>
likely has a template ready to go.
e.g. <code>usethis::use_mit_license()</code>.</p>
<p><br />
</p>
</div>
<div id="configuration" class="section level3">
<h3>Configuration</h3>
<p>As part of the set up stage, we’re also wanting to make things easier
on ourselves so that we can be more productive during the “do stuff”
stage.</p>
<p>There is a hidden file called .Rprofile which is loaded as R launches
and is a place where you can place customisations of options to make
your R life easier. For instance I have mine set to automatically load
workflow helper packages such as <code>usethis</code>
<code>testthat</code> and <code>devtools</code> (but only if I’m in an
interactive session). And set a few options to make R produce more
warnings so that it helps me know when something might cause an issue.
It’s also a good place to set some defaults such as your favourite CRAN
mirror so that R doesn’t need to ask you when you go to install
packages.</p>
<p>These configurations are usually once-off set and forget type things
that make your life slightly easier.</p>
<pre class="r"><code>usethis::edit_r_profile()</code></pre>
<pre class="r"><code> # load workflow helper packages if in interactive session
if (interactive()) {
  suppressMessages(require(devtools))
  suppressMessages(require(usethis))
  suppressMessages(require(testthat))
}


# set CRAN
options(repos = c(CRAN = &quot;https://cloud.r-project.org/&quot;))


# warn on partial matches
options(
  warnPartialMatchArgs = TRUE,
  warnPartialMatchDollar = TRUE,
  warnPartialMatchAttr = TRUE
)

# fancy quotes are annoying and lead to
# &#39;copy + paste&#39; bugs / frustrations
options(useFancyQuotes = FALSE)</code></pre>
<p>Don’t put analysis modifying options into your .Rprofile
e.g. automatic loading of <code>tidyverse</code>. It will make the code
you write less reproducible because it will start depending on these
hidden settings, and it can make debugging harder.</p>
<p><br />
</p>
<div id="keyboard-shortcuts" class="section level4">
<h4>Keyboard shortcuts</h4>
<p>Part of improving efficiency in your workflow is getting to know some
keyboard shortcuts to make life easier.</p>
<p>In RStudio, the keyboard shortcut to rule them all is <kbd>Alt</kbd>
+ <kbd>Shift</kbd> + <kbd>K</kbd> which is the shortcut to display most
of the in-built RStudio keyboard shortcuts.</p>
<p>Other useful shortcuts</p>
<table>
<thead>
<tr class="header">
<th>Keys</th>
<th>produces</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd></td>
<td>%&gt;%</td>
</tr>
<tr class="even">
<td><kbd>Alt</kbd> + <kbd>-</kbd></td>
<td>&lt;-</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd></td>
<td>knits Rmd</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>F10</kbd></td>
<td>Restart R</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>I</kbd></td>
<td>Insert code chunk</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd></td>
<td>Source active file</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd> + <kbd>.</kbd></td>
<td>Go to file/function</td>
</tr>
<tr class="even">
<td><kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>G</kbd></td>
<td>Jump to line</td>
</tr>
</tbody>
</table>
<p>Make your own…</p>
<p>Tools -&gt; Modify Keyboard Shortcuts</p>
<p><br />
</p>
</div>
</div>
<div id="scripts" class="section level3">
<h3>Scripts</h3>
<p>When we’re thinking about our project and how we want to operate,
this also involves establishing the structure of how you want to capture
your code. It can be useful to separate steps of your project into their
own script. When doing this, it is recommended to prefix the names of
the scripts with a number which indicates the order in which the scripts
are designed to be run. Thinking about and creating this structure of
documents from the start can help with the development process as again,
we’re grouping similar things making it easier to know where to look
later on.</p>
<p>The choice of a plain R script or using something like RMarkdown can
often come down to how much you want to take advantage of the extra
functionality such as embedding of figures/tables or formatting of
text.</p>
<p>An RMarkdown can be a good format for creating a “main” workflow
document that describes the individual steps of your workflow and can
use <code>source</code> on R scripts that actually do the tasks
(e.g.<code>source("scriptname.R)</code>). This starts to bring an aspect
of modularity to your code and enables you to reuse the ‘modules’ in
other documents. As projects grow, aiming for modularity is good, as it
starts to consolidate your code base making it easier to maintain and
reuse. Reusing code that has been tested can reduce development time and
the likelihood of errors.</p>
<p><br />
</p>
</div>
<div id="initialise-version-control" class="section level3">
<h3>Initialise Version Control</h3>
<p>This section is a very brief overview of version control,
specifically to say that you should start to build it into your workflow
and we’ll touch on it again in the <a href="#auto-vc">Automating Version
Control</a> section but ultimately the details are outside of the scope
of this course as they take a course of their own to convey.</p>
<p>You are likely familiar with versioning, usually people try to
achieve this through file names. This is ok to a point but can
cumbersome and doesn’t scale well across multiple files nor does it give
you an easy way to see exactly what the differences were between those
files. This is where using version control software such as
<code>git</code> can make your life easier.</p>
<p>It’s always a good idea to get this set up before you get under way
doing actual work so that you can track you changes from the the very
start. In the case of <code>git</code>, following <a
href="https://happygitwithr.com">Happy Git with R</a> for installing and
configuring <code>git</code> and subsequently telling RStudio about your
installation is a good place to start.</p>
<p>Once you have RStudio set up with <code>git</code>, when you add
(initialise) version control onto your project, you’ll have a new tab
appear and a hidden directory called <code>.git</code> will be created
inside your project directory. A directory under version control is
called a ‘repository’ or ‘repo’. These repositories stored locally on
your machine can be uploaded to remote, online code repository websites.
Some popular ones are <a href="https://github.com">GitHub</a>, <a
href="https://gitlab.com">GitLab</a>, or <a
href="https://bitbucket.com">BitBucket</a>. These online sites offer the
ability to create and store public or private repositories.</p>
<p><img src="images/09-git_panel.png" width="282" style="display: block; margin: auto;" /></p>
<p>Version control is used for keeping track of the changes made to your
scripts, we don’t usually use it to manage our data - since our initial
raw data isn’t going to be changing. For managing data, we use an
appropriate backup or archiving system.</p>
<p><br />
</p>
</div>
</div>
<div id="testing-and-adjusting" class="section level2">
<h2>Testing and Adjusting</h2>
<p>Once things are set up, we’re ready to actually start doing the work
we want to do. As we develop our code however, we constantly cycle
through testing and adjusting. Each piece of code we write needs to be
checked that it is working correctly. Often this type of testing is
performed manually as you create it and try to run it asking ‘does the
line of code run?’ - checking for syntax errors, and then ‘does the
output look right?’. When the answer to these either question is no, we
then enter a debugging mode where we try and find out why the code isn’t
doing what we think it should.</p>
<p><br />
</p>
<div id="debugging" class="section level3">
<h3>Debugging</h3>
<p>Errors messages are common when coding and are a way the computer
communicates it doesn’t understand what the instructions it has been
given are. Common types of errors we encounter are:</p>
<ul>
<li>syntactical</li>
<li>logical</li>
<li>runtime</li>
</ul>
<p>Syntactical errors are usually the most straight forward, the
computer says that no straight away due to improper syntax. These are
usually the easiest to find and correct.</p>
<p>Logical errors come about through incorrect implementation of logic.
The computer will run the code without complaint but the result isn’t
correct - these can be tricky to find and fix because they often involve
checking each logical statement and subsequent code pathway in order to
track down what is going wrong.</p>
<p>Runtime errors are errors where you are trying to make the computer
do something it can’t in certain situations, such as storing a result in
a certain location. The code will run sometimes but not others and again
they can be tricky to track down.</p>
<p>Remember, each time we find and fix an error, we must retest. This
can get quite laborious to do manually so we can find better systems to
help such as <a href="#automatic-tests">automatic testing</a> but first
we’ll cover some general principles on how to go about debugging.</p>
<div class="figure" style="text-align: center">
<img src="images/09-fixing_problems.png" alt="https://xkcd.com/1739/" width="50%" height="50%" />
<p class="caption">
<a href="https://xkcd.com/1739/" class="uri">https://xkcd.com/1739/</a>
</p>
</div>
<p><br />
</p>
<div id="where-do-i-start" class="section level4">
<h4>Where do I start?</h4>
<p>Knowing where to start debugging takes practice. Some general good
advice can be found in <a href="https://adv-r.hadley.nz/debugging.html"
class="uri">https://adv-r.hadley.nz/debugging.html</a> with some
specific tips and tricks for R. The general premise is that we want to
test and confirm all of our assumptions.</p>
<blockquote>
<p>Finding your bug is a process of confirming the many things that you
believe are true — until you find one which is not true.</p>
<p>— Norm Matloff</p>
</blockquote>
<p>Some techniques for solving errors and confirming our assumptions can
include:</p>
<ul>
<li>using print statements to confirm values at key stages</li>
<li>googling the error message</li>
<li>restart R and rerun the code</li>
<li>reading the documentation</li>
<li>talk through the problem</li>
</ul>
<p><img src="images/09-rubberduck.jpg" width="50%" height="50%" style="display: block; margin: auto;" /></p>
<p>‘Rubber duck debugging’ is a technique which involves talking your
way through what you are trying to achieve with your code and explaining
what your code is actually doing at each step to a rubber duck (or other
toy). Often by being systematic and saying out loud what is happening
this will trigger an “a-ha” moment as to what is causing the issue. You
can also use this technique with another person e.g. co-worker instead
of a toy if you prefer.</p>
<p><br />
</p>
</div>
<div id="general-process" class="section level4">
<h4>General process</h4>
<p>My general process focuses on the initial source of the error and
then starts to work backwards in command history.</p>
<ol style="list-style-type: decimal">
<li>Do I recognise the message?</li>
<li>Re-look at the command I ran looking for
<ul>
<li>typos</li>
<li>missing syntax (e.g. brackets, semicolons, etc.)</li>
<li>correct naming of things</li>
</ul></li>
<li>Is the input for my command what I expect it is?</li>
<li>Did the previous command run properly?
<ul>
<li>if not jump to 1. for the previous command</li>
</ul></li>
</ol>
<p><br />
</p>
</div>
<div id="getting-to-know-some-errors" class="section level4">
<h4>Getting to know some errors</h4>
<p>R is notorious for having messages that are not user friendly. Lets
look at a few common R errors and warnings so that we can become more
familiar with a) what they look like, b) how to find the useful bits</p>
<p><strong>Anatomy of a message</strong></p>
<ol style="list-style-type: decimal">
<li>Usually the first word is “Error”, but sometimes it can be
“Warning”. Code that produces errors won’t run. Code that produces
warnings will run but is signifying that you should be extra careful
about the output because it might not be doing what you think it
is.</li>
<li>Immediately following is the exact code that is producing the
error/warning. This tells you where to start looking.</li>
<li>after the <code>:</code> gives the details about what the
error/warning actually is.</li>
</ol>
<pre class="r"><code>my_var
#&gt; Error in eval(expr, envir, enclos): object &#39;my_var&#39; not found</code></pre>
<p>Caused by trying to access a variable that hasn’t been defined
yet.</p>
<pre class="r"><code>mean[2]
#&gt; Error in mean[2]: object of type &#39;closure&#39; is not subsettable</code></pre>
<p>Caused by using the subsetting brackets <code>[]</code> instead of
<code>()</code> which are used for a function.</p>
<pre class="r"><code>a &lt;- c(one = 1,two = 2, three = 3)
a$one
#&gt; Error in a$one: $ operator is invalid for atomic vectors</code></pre>
<p>You can’t use <code>$</code> on an atomic vector, it’s used on
structures such as data.frames or lists.</p>
<pre class="r"><code>a[[20]]
#&gt; Error in a[[20]]: subscript out of bounds</code></pre>
<p>Caused by trying to access an element at an index that doesn’t
exist.</p>
<pre class="r"><code>read.csv(&quot;myfile.csv&quot;)
#&gt; Warning in file(file, &quot;rt&quot;): cannot open file &#39;myfile.csv&#39;: No such file or
#&gt; directory
#&gt; Error in file(file, &quot;rt&quot;): cannot open the connection</code></pre>
<p>Caused by providing a file name that R cannot find in the working
directory.</p>
<pre class="r"><code>ggplot()
#&gt; Error in ggplot(): could not find function &quot;ggplot&quot;</code></pre>
<p>Caused by not having a <code>ggplot</code> function either user
defined in the environment or not loaded a library that contains it
(<code>ggplot2</code> or <code>tidyverse</code>).</p>
<pre class="r"><code>notapackage::notafunction()
#&gt; Error in loadNamespace(x): there is no package called &#39;notapackage&#39;</code></pre>
<p>Caused by trying to call a function from a package that doesn’t exist
is not be installed on the library path.</p>
<pre class="r"><code>if(NA){
  print(&quot;was NA&quot;)
}
#&gt; Error in if (NA) {: missing value where TRUE/FALSE needed</code></pre>
<p><code>if</code> requires the result to be TRUE or FALSE,
<code>NA</code> isn’t a TRUE or FALSE.</p>
<pre class="r"><code>if(c(3 &gt; c(1,2,3))){
  print(&quot;less than three&quot;)
}
#&gt; Error in if (c(3 &gt; c(1, 2, 3))) {: the condition has length &gt; 1

if(c(1,2,3) &gt; 3){
  print(&quot;less than one&quot;)
}
#&gt; Error in if (c(1, 2, 3) &gt; 3) {: the condition has length &gt; 1</code></pre>
<p><code>if</code> requires a single TRUE or FALSE result, these
statements create multiple. In older versions of R this produced a
warning and not an error.</p>
<pre class="r"><code>mean(c(&quot;1&quot;, &quot;2&quot;))
#&gt; Warning in mean.default(c(&quot;1&quot;, &quot;2&quot;)): argument is not numeric or logical:
#&gt; returning NA</code></pre>
<p>Caused by the a data type that doesn’t coerce into a numeric
automatically.</p>
<p><br />
</p>
</div>
</div>
<div id="adjusting" class="section level3">
<h3>Adjusting</h3>
<p>In the process of developing, it’s also important to take
opportunities to adjust how things are being done. Working code is
better than no code, but as you create more code it’s also a good idea
to every so often look for opportunities to make things better -
efficiency or maintenance wise.</p>
<p>Code replication is a good place to start - if you’ve found yourself
copy and pasting the same code over in the same project, consider making
it into a function. This then gives you a single place that needs to be
changed. If you find yourself copy and pasting your functions across
projects, consider creating your own package. The “rule” of three can be
be a good guideline for this. If you’ve duplicated a line of code 3 or
more times, consider turning it into a function. If you duplicate a
function three or more times, consider putting it into a package.</p>
<p><br />
</p>
<div id="rmarkdown-driven-dev" class="section level4">
<h4>RMarkdown driven dev</h4>
<p>Emily Riederer has a great blog post about <a
href="https://emilyriederer.netlify.app/post/rmarkdown-driven-development/">RMarkdown
driven development</a> which describes a process of development using
RMarkdown documents, where first you get things to a working situation,
then go through rounds of tidying your document bringing like-to-like
with your code so that code blocks contain similar processes. As the
tidying is performed, it provides an opportunity to also reduce
duplication of code and increase the maintainability by converting
processes into functions.</p>
<p><br />
</p>
</div>
<div id="packages" class="section level4">
<h4>Packages</h4>
<p>If you find yourself copy and pasting function between documents, it
might be time to start creating your own package, that way you reduce
the number of individual places your function is defined and this makes
it easier in the future to maintain. Packages also bring in an extra
level of utility in that you can improve documentation and implement
automated testing so that you know when changes break functionality.</p>
<p>If you want to look further into how to create packages, check out
the <a href="https://r-pkgs.org/index.html">R Packages online book</a>
and you can use <code>usethis::create_package()</code> to create a new
package from a template. Combined with the <a
href="https://devtools.r-lib.org"><code>devtools</code></a> package it’s
possible to have a basic package created relatively quickly (<a
href="https://www.rstudio.com/resources/rstudioconf-2018/you-can-make-a-package-in-20-minutes-jim-hester/">perhaps
in 20 minutes</a>. If you’re finding yourself creating functions that
you are using in many projects, the time investment to learn how to
create a package is well worth it.</p>
<p><br />
</p>
</div>
</div>
</div>
<div id="automating" class="section level2">
<h2>Automating</h2>
<p>As you go about developing, there are two main things you will find
yourself doing over and over again - trying to remember what you have
changed, and making sure that any changes haven’t broken anything. These
processes can be quite time intensive so it’s quite useful to try and
automate the pieces that you can.</p>
<p><br />
</p>
<div id="automatic-tests" class="section level3">
<h3>Automated testing</h3>
<p>As you code and manually test, it can be beneficial to formalise the
manual tests into an automated solution so that you can be more
efficient and also ensure that you know when you ‘break things’ with
future changes. This is particularly useful when you fix bugs in your
code, create a test that replicates the condition that caused the
bug.</p>
<p>In R, one system uses the package <code>testthat</code> which
provides a framework to create these formal tests which will evaluate a
piece of code against the known expected output and tell you if they
don’t match.</p>
<pre class="r"><code>
# expect a mean of 2
testthat::expect_equal(mean(c(1,2,3)), 2)</code></pre>
<p><code>testthat</code> operates by setting up expectations and testing
if they hold true. If they are true the expectation function is silent,
if thy aren’t it will tell you when run. This lets you formalise tests
that you would be running manually and as you make adjustments to your
code you can rerun these tests to check things are still working.</p>
<p><br />
</p>
</div>
<div id="auto-vc" class="section level3">
<h3>Automating differences</h3>
<p>Version control software is slightly different from what you might
have experienced with something like ‘track changes’ in Microsoft Word
which tracks all changes live.</p>
<p>In the case of <code>git</code>, once you have everything set up and
configured there is a (simplified) mini-workflow which can be done after
clicking the ‘commit’ button in the git tab:</p>
<p><img src="images/09-commit.png" width="510" style="display: block; margin: auto;" /></p>
<ol style="list-style-type: decimal">
<li>Tell <code>git</code> you want it to track the changes on a
file</li>
<li>Make some changes</li>
<li>Tell <code>git</code> you want to include these changes in its
tracking
<ul>
<li>click the ‘staged’ checkbox on the file in the git-commit
window</li>
</ul></li>
<li>Tell <code>git</code> to ‘snapshot’ your changes and include a
message about them
<ul>
<li>write a message and click commit in the git - commit window</li>
</ul></li>
<li>go back to step 2.</li>
</ol>
<p>Why would you do this workflow? For your future self. Every snapshot
you take with <code>git</code> gives you a point in time that you can
roll back to if you wish - from a reproducibility point of view this
lets you run <em>any</em> version of your code at a snapshot.
<code>git</code> can also let you see exactly what changes there were
between snapshots which can be extremely helpful for debugging</p>
<p><code>git</code> is a fairly complex piece of software and provides
more functionality than this, but for starting out this workflow covers
the main need and use case.</p>
<p><br />
</p>
</div>
</div>
<div id="finalise" class="section level2">
<h2>Finalise</h2>
<p>Congratulations! You’ve made it to the end-stage of your project
where you’re ready to wrap things up and share your project with others.
What you do at this stage entirely depends on what output your project
was for. Perhaps it’s sending your entire project directory to your
lecturer or supervisor. Or this could involve uploading your version
controlled code to an online code repository such as <a
href="https://github.com">https://github.com</a> and publishing the url
in your paper or other output.</p>
<p>Regardless, embrace the completion. Then continue on to your next
project, bringing with you the skills you learnt on this one.</p>
<p><br />
</p>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<p>An example workflow set up</p>
<pre class="r"><code># Create and open a new project
usethis::create_project(path = &quot;~/myproject&quot;)

# Initialise version control
usethis::use_git()

# Create the project structure
dir.create(&quot;data&quot;)
dir.create(&quot;scripts&quot;)
dir.create(&quot;output&quot;)
dir.create(&quot;docs&quot;)

# Tell git to ignore the data directory by adding line:
# data/
usethis::edit_git_ignore()


# Add a README
usethis::use_readme_md()

# Add MIT License
usethis::use_mit_license(copyright_holder = &quot;Firstname Lastname&quot;)</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiV29ya2Zsb3dzIgpkYXRlOiAiU2VtZXN0ZXIgMSwgMjAyMiIKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQogICAgdG9jX2RlcHRoOiAzCiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCiAgICBjb2RlX2ZvbGRpbmc6IHNob3cKLS0tCiAgCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQpsaWJyYXJ5KGtuaXRyKQoKa25pdHI6Om9wdHNfY2h1bmskc2V0KAogIGNvbW1lbnQgPSAiIz4iLAogIGZpZy5wYXRoID0gImZpZ3VyZXMvMDkvIiwgIyB1c2Ugb25seSBmb3Igc2luZ2xlIFJtZCBmaWxlcwogIGNvbGxhcHNlID0gVFJVRSwKICBlY2hvID0gVFJVRQopCmBgYAoKPiAjIyMjIEFzc29jaWF0ZWQgTWF0ZXJpYWwKPgo+IFpvb20gTm90ZXM6IFtab29tIE5vdGVzIDA5IC0gV29ya2Zsb3dzXSh6b29tX25vdGVzXzA5Lmh0bWwpCgoKCgoKIyMgSW50cm9kdWN0aW9uCgpJbiB0aGlzIG1vZHVsZSB3ZSdyZSBnb2luZyB0byBjb3ZlciBzb21lIHdheXMgdG8gaW1wcm92ZSB5b3VyIHdvcmtmbG93IGFzIHlvdSB1c2UgUi4gQXMgeW91IGRldmVsb3AgeW91ciB1bmRlcnN0YW5kaW5nIG9mIFIgYW5kIHByb2NlZWQgdG8gZG8gZmFuY2llciB0aGluZ3MsIHlvdSdsbCB3YW50IHRvIHN0YXJ0IGJyaW5naW5nIGluIGV4dHJhIGZlYXR1cmVzIHRvIG1ha2UgeW91ciBsaWZlIGVhc2llci4gCgpXaGVuIHdlIHRoaW5rIG9mIGEgd29ya2Zsb3cgdGhlcmUgYXJlIHRocmVlIG1haW4gcGhhc2VzIHdlIHVuZGVydGFrZS4gQXQgdGhlIHZlcnkgYmVnaW5uaW5nIHdlJ3JlIHNldHRpbmcgb3Vyc2VsdmVzIHVwLCBlc3RhYmxpc2hpbmcgaG93IHRoaW5ncyB3aWxsIGJlIG9yZ2FuaXNlZCwgYW5kIGhvdyB3ZSBpbnRlbmQgdG8gd29yay4gU2Vjb25kLCB3ZSBkbyB0aGUgd29yayAtIHdoaWNoIGludm9sdmVzIHRlc3RpbmcgYW5kIGFkanVzdGluZyB0aGUgZXN0YWJsaXNoZWQgc3lzdGVtcywgYW5kIGxhc3RseSwgd2Ugd3JhcCB0aGluZ3MgdXAuCgpcCgojIyBHZXR0aW5nIG9yZ2FuaXNlZAoKSW4gdGhlIGZpcnN0IG1vZHVsZSB3ZSBkaXNjdXNzZWQgY3JlYXRpbmcgYSBzdHJ1Y3R1cmUgZm9yIHlvdXIgd29yayBpbnNpZGUgYW4gUlN0dWRpbyBwcm9qZWN0LiBGb3IgYm90aCBhbmFseXNpcyBhbmQgcHJvZ3JhbW1pbmcgcHJvamVjdHMgaXQgaXMgdXNlZnVsIHRvIGhhdmUgYSBwcmUtZXN0YWJsaXNoZWQgJ2dvLXRvJyB0ZW1wbGF0ZSBzdHJ1Y3R1cmUgdG8ga2VlcCB0aGluZ3Mgb3JnYW5pc2VkLgoKQW4gb3ZlcmFyY2hpbmcgcHJpbmNpcGxlIGlzICJrZWVwIHNpbWlsYXIgdGhpbmdzIHRvZ2V0aGVyIi4gRm9yIGFuIGFuYWx5c2lzIHByb2plY3QsIHRoaXMgY2FuIG1lYW4gdGhlIHN0cnVjdHVyZSB3ZSBmaXJzdCBjb3ZlcmVkIHdoZW4gc2V0dGluZyB1cCBhbiBSU3R1ZGlvIFByb2plY3Q6CgpgYGAKTXlfUHJvamVjdC8KICB8LSBkYXRhLwogIHwtIGRvY3MvCiAgfC0gb3V0cHV0LwogIFwtIHNjcmlwdHMvCmBgYAoKQmV5b25kIHRoZSBzdHJ1Y3R1cmUgb2Ygd2hlcmUgd2UgcHV0IHRoaW5ncywgd2UgYWxzbyB3YW50IHRvIGVzdGFibGlzaCB0aGUgcHJpbmNpcGxlcyBvZiBob3cgdGhlIHByb2plY3Qgd2lsbCBvcGVyYXRlLiBUd28gaW1wb3J0YW50IGZpbGVzIGluIHRoaXMgcmVnYXJkIGFyZSB0aGUgUkVBRE1FIGFuZCB0aGUgTElDRU5TRS4gVGhlIFJFQURNRSB3aWxsIHRlbGwgeW91cnNlbGYgYW5kIG90aGVycyBpbXBvcnRhbnQgZGV0YWlscyBhYm91dCB0aGUgcHJvamVjdCBzdWNoIGFzIHdoZXJlIHRoZSBzb3VyY2UgZGF0YSBjYW1lIGZyb20sIG9yIGhvdyB0byBydW4gdGhlIGNvZGUgaW4gdGhlIHByb2plY3QgKGUuZy4gb3JkZXIgb2Ygc2NyaXB0cykuIFNlY29uZGx5LCBhIExJQ0VOU0UgLSB0aGlzIHdpbGwgYmVjb21lIGltcG9ydGFudCBsYXRlciBvbiB3aGVuIGNvZGUgeW91IGhhdmUgd3JpdHRlbiBtYXkgYmUgcmVsZWFzZWQgZm9yIG90aGVycyB0byBzZWUgKGUuZy4gYXMgcGFydCBvZiBhIHJlc2VhcmNoIHBhcGVyKSBhcyBpdCB3aWxsIHNldCBvdXQgdGhlIHJ1bGVzIHVuZGVyIHdoaWNoIHBlb3BsZSBtYXkgdXNlIHlvdXIgY29kZS4KClwKCiMjIyBMaWNlbnNpbmcKCldoZW4gd2UncmUgZGVhbGluZyB3aXRoIHJlc2VhcmNoLCBieSBhbmQgbGFyZ2Ugd2UncmUgb3BlcmF0aW5nIGluIGFuICJvcGVuIHNvdXJjZSIgbWFubmVyIC0gaS5lLiB0aGUgY29kZSB0aGF0IGlzIHVzZWQgdG8gcGVyZm9ybSB0aGUgcmVzZWFyY2ggaXMgc2hhcmVkIGFsb25nc2lkZSB0aGUgcmVzdWx0cyBzbyB0aGF0IHBlb3BsZSBjYW4gdmlldyBpdC4gSnVzdCBiZWNhdXNlIHRoZSBjb2RlIGlzIGF2YWlsYWJsZSBkb2Vzbid0IG1lYW4gdGhhdCBwZW9wbGUgZ2V0IHRvIGRvIHdoYXQgdGhleSBsaWtlIHdpdGggeW91ciBjb2RlIHRob3VnaC4gCgpJdCdzIGFsd2F5cyBhIGdvb2QgcHJhY3RpY2UgdG8gYWRkIGEgbGljZW5zZSB0byBnbyBhbG9uZyB3aXRoIHlvdXIgY29kZS4gQSBsaWNlbnNlIGlzIGEgZG9jdW1lbnQgdGhhdCBsZXRzIHBlb3BsZSB3aG8gY29tZSBhY3Jvc3MgdGhlIGNvZGUga25vdyB3aGF0IHRoZXkncmUgYWxsb3dlZCB0byBkbyB3aXRoIGl0LCBhbmQgd2hhdCB0aGV5J3JlIG5vdC4gVGhlcmUgYXJlIG1hbnkgb3BlbiBzb3VyY2UgbGljZW5zZXMgYXZhaWxhYmxlIGFuZCB0aGV5IHZhcnkgaW4gd2hhdCBiZWhhdmlvdXJzIHRoZXkgcGVybWl0IG9yIHJlc3RyaWN0LiBXaGVuIGNob29zaW5nIGFuIG9wZW4gc291cmNlIGxpY2VuY2UgdGhlcmUgYXJlIDMgbWFpbiBxdWVzdGlvbnMgeW91IG5lZWQgdG8gYW5zd2VyOgoKMS4gRG8geW91IGNhcmUgYWJvdXQgaG93IGFueSBtb2RpZmljYXRpb25zIHRoYXQgcGVvcGxlIG1ha2UgdG8gdGhlIGNvZGUgYXJlIGRpc3RyaWJ1dGVkPwoyLiBEbyB5b3Ugb3IgeW91ciBpbnN0aXR1dGlvbiBvd24gYW55IHJlbGF0ZWQgc29mdHdhcmUgcGF0ZW50cz8KMy4gRG8geW91IGNhcmUgYWJvdXQgdGhlIHdheSB5b3VyIG5hbWUgaXMgb3IgaXNuJ3QgbWVudGlvbmVkIHdoZW4gc29tZW9uZSBtYWtlcyB1c2Ugb2YgeW91ciBjb2RlPwoKQW4gZXh0cmVtZWx5IGNvbW1vbiBsaWNlbnNlIGluIHJlc2VhcmNoIGNvZGUvc29mdHdhcmUgaXMgdGhlIE1JVCBsaWNlbnNlIHdoaWNoIGlzIHRoZSBzaW1wbGVzdCBhbmQgbW9zdCBwZXJtaXNzaXZlLCBhbmQgZXNzZW50aWFsbHkgc2F5cyB0aGUgY29kZSBpcyAiYXMgaXMiIHdpdGhvdXQgYW55IHdhcnJhbnRpZXMsIGFuZCBsZXRzIHBlb3BsZSB1c2UsIGNvcHksIG1vZGlmeSwgYW5kIGRpc3RyaWJ1dGUgeW91ciBjb2RlIHNvIGxvbmcgYXMgdGhlIGNvcHlyaWdodCBub3RpY2UgZ29lcyBhbG9uZyB3aXRoIGl0IChpLmUuIGZvciBhdHRyaWJ1dGlvbiBwdXJwb3NlcykuIEZvciBoZWxwIHNlbGVjdGluZyBhbiBhcHByb3ByaWF0ZSBsaWNlbnNlIGhhdmUgYSBsb29rIGF0IFtodHRwczovL2Nob29zZWFsaWNlbnNlLmNvbV0oaHR0cHM6Ly9jaG9vc2VhbGljZW5zZS5jb20pLgoKXAoKIyMjIFRoZSBgdXNldGhpc2AgUGFja2FnZQoKVGhlIFtgdXNldGhpc2BdKGh0dHBzOi8vdXNldGhpcy5yLWxpYi5vcmcpIHBhY2thZ2UgaXMgZGVzaWduZWQgdG8gYXNzaXN0IGluIHRoZSBjcmVhdGlvbiBvZiBuZXcgcGFja2FnZXMgYW5kIHNldHRpbmcgdXAgb2YgbmV3IHByb2plY3RzLiBJdCBpcyBhbiBleHRyZW1lbHkgdXNlZnVsIHBhY2thZ2UgZm9yIHNldmVyYWwgIndvcmtmbG93IiB0YXNrcy4gSXQgcHJvdmlkZXMgZnVuY3Rpb25zIGZvciBtYW55IGNvbW1vbiB3b3JrZmxvdyB0YXNrcyBzdWNoIGFzIGNyZWF0aW5nIG5ldyBwcm9qZWN0cywgYWRkaW5nIFJFQURNRSBmaWxlcywgb3Igb3BlbmluZyBSIGZpbGVzLiAKCmBgYHtyLCBldmFsID0gRkFMU0V9CiMgQ3JlYXRlIGFuZCBvcGVuIGEgbmV3IHBhY2thZ2UKdXNldGhpczo6Y3JlYXRlX3Byb2plY3QocGF0aCA9ICJwYXRoL3RvL25ldy9wcm9qZWN0IikKCiMgQ3JlYXRlIGEgbWFya2Rvd24gUkVBRE1FCnVzZXRoaXM6OnVzZV9yZWFkbWVfbWQoKQoKIyBDcmVhdGUgYW4gUk1hcmtkb3duIFJFQURNRQp1c2V0aGlzOjp1c2VfcmVhZG1lX3JtZCgpCgojIENyZWF0ZSBhIG5ldyBSIHNjcmlwdCBpbiB5b3VyIHByb2plY3QgaW4gZGlyZWN0b3J5IFIvCnVzZXRoaXM6OnVzZV9yKG5hbWUgPSAibXlmaWxlLlIiKQoKYGBgCgpPbiB0b3Agb2YgdGhlc2UsIHRoZXJlIGFyZSBtYW55IG90aGVyIGhlbHBlciBmdW5jdGlvbnMsIHN1Y2ggYXMgZm9yIGNyZWF0aW5nIHZhcmlvdXMgbGljZW5zZXMsIGVkaXRpbmcgY29uZmlndXJhdGlvbnMsIGludGVyYWN0aW5nIHdpdGggdmVyc2lvbiBjb250cm9sIHNvZnR3YXJlLCBvciBzZXR0aW5nIHVwIGF1dG9tYXRpYyB0ZXN0aW5nLiBBbGwgb2Ygd2hpY2ggd2UnbGwgdG91Y2ggb24gaW4gdGhpcyBtb2R1bGUuCgpPbmNlIHlvdSBoYXZlIGNob3NlbiBhbiBhcHByb3ByaWF0ZSBsaWNlbnNlLCBgdXNldGhpc2AgbGlrZWx5IGhhcyBhIHRlbXBsYXRlIHJlYWR5IHRvIGdvLiBlLmcuIGB1c2V0aGlzOjp1c2VfbWl0X2xpY2Vuc2UoKWAuCgpcCgojIyMgQ29uZmlndXJhdGlvbgoKQXMgcGFydCBvZiB0aGUgc2V0IHVwIHN0YWdlLCB3ZSdyZSBhbHNvIHdhbnRpbmcgdG8gbWFrZSB0aGluZ3MgZWFzaWVyIG9uIG91cnNlbHZlcyBzbyB0aGF0IHdlIGNhbiBiZSBtb3JlIHByb2R1Y3RpdmUgZHVyaW5nIHRoZSAiZG8gc3R1ZmYiIHN0YWdlLgoKVGhlcmUgaXMgYSBoaWRkZW4gZmlsZSBjYWxsZWQgLlJwcm9maWxlIHdoaWNoIGlzIGxvYWRlZCBhcyBSIGxhdW5jaGVzIGFuZCBpcyBhIHBsYWNlIHdoZXJlIHlvdSBjYW4gcGxhY2UgY3VzdG9taXNhdGlvbnMgb2Ygb3B0aW9ucyB0byBtYWtlIHlvdXIgUiBsaWZlIGVhc2llci4gRm9yIGluc3RhbmNlIEkgaGF2ZSBtaW5lIHNldCB0byBhdXRvbWF0aWNhbGx5IGxvYWQgd29ya2Zsb3cgaGVscGVyIHBhY2thZ2VzIHN1Y2ggYXMgYHVzZXRoaXNgIGB0ZXN0dGhhdGAgYW5kIGBkZXZ0b29sc2AgKGJ1dCBvbmx5IGlmIEknbSBpbiBhbiBpbnRlcmFjdGl2ZSBzZXNzaW9uKS4gQW5kIHNldCBhIGZldyBvcHRpb25zIHRvIG1ha2UgUiBwcm9kdWNlIG1vcmUgd2FybmluZ3Mgc28gdGhhdCBpdCBoZWxwcyBtZSBrbm93IHdoZW4gc29tZXRoaW5nIG1pZ2h0IGNhdXNlIGFuIGlzc3VlLiBJdCdzIGFsc28gYSBnb29kIHBsYWNlIHRvIHNldCBzb21lIGRlZmF1bHRzIHN1Y2ggYXMgeW91ciBmYXZvdXJpdGUgQ1JBTiBtaXJyb3Igc28gdGhhdCBSIGRvZXNuJ3QgbmVlZCB0byBhc2sgeW91IHdoZW4geW91IGdvIHRvIGluc3RhbGwgcGFja2FnZXMuCgpUaGVzZSBjb25maWd1cmF0aW9ucyBhcmUgdXN1YWxseSBvbmNlLW9mZiBzZXQgYW5kIGZvcmdldCB0eXBlIHRoaW5ncyB0aGF0IG1ha2UgeW91ciBsaWZlIHNsaWdodGx5IGVhc2llci4KCmBgYHtyLCBldmFsPUZBTFNFfQp1c2V0aGlzOjplZGl0X3JfcHJvZmlsZSgpCmBgYAoKCmBgYHtyLCBldmFsPUZBTFNFfQogIyBsb2FkIHdvcmtmbG93IGhlbHBlciBwYWNrYWdlcyBpZiBpbiBpbnRlcmFjdGl2ZSBzZXNzaW9uCmlmIChpbnRlcmFjdGl2ZSgpKSB7CiAgc3VwcHJlc3NNZXNzYWdlcyhyZXF1aXJlKGRldnRvb2xzKSkKICBzdXBwcmVzc01lc3NhZ2VzKHJlcXVpcmUodXNldGhpcykpCiAgc3VwcHJlc3NNZXNzYWdlcyhyZXF1aXJlKHRlc3R0aGF0KSkKfQoKCiMgc2V0IENSQU4Kb3B0aW9ucyhyZXBvcyA9IGMoQ1JBTiA9ICJodHRwczovL2Nsb3VkLnItcHJvamVjdC5vcmcvIikpCgoKIyB3YXJuIG9uIHBhcnRpYWwgbWF0Y2hlcwpvcHRpb25zKAogIHdhcm5QYXJ0aWFsTWF0Y2hBcmdzID0gVFJVRSwKICB3YXJuUGFydGlhbE1hdGNoRG9sbGFyID0gVFJVRSwKICB3YXJuUGFydGlhbE1hdGNoQXR0ciA9IFRSVUUKKQoKIyBmYW5jeSBxdW90ZXMgYXJlIGFubm95aW5nIGFuZCBsZWFkIHRvCiMgJ2NvcHkgKyBwYXN0ZScgYnVncyAvIGZydXN0cmF0aW9ucwpvcHRpb25zKHVzZUZhbmN5UXVvdGVzID0gRkFMU0UpCmBgYAoKRG9uJ3QgcHV0IGFuYWx5c2lzIG1vZGlmeWluZyBvcHRpb25zIGludG8geW91ciAuUnByb2ZpbGUgZS5nLiBhdXRvbWF0aWMgbG9hZGluZyBvZiBgdGlkeXZlcnNlYC4gSXQgd2lsbCBtYWtlIHRoZSBjb2RlIHlvdSB3cml0ZSBsZXNzIHJlcHJvZHVjaWJsZSBiZWNhdXNlIGl0IHdpbGwgc3RhcnQgZGVwZW5kaW5nIG9uIHRoZXNlIGhpZGRlbiBzZXR0aW5ncywgYW5kIGl0IGNhbiBtYWtlIGRlYnVnZ2luZyBoYXJkZXIuCgpcCgojIyMjIEtleWJvYXJkIHNob3J0Y3V0cwoKUGFydCBvZiBpbXByb3ZpbmcgZWZmaWNpZW5jeSBpbiB5b3VyIHdvcmtmbG93IGlzIGdldHRpbmcgdG8ga25vdyBzb21lIGtleWJvYXJkIHNob3J0Y3V0cyB0byBtYWtlIGxpZmUgZWFzaWVyLgoKSW4gUlN0dWRpbywgdGhlIGtleWJvYXJkIHNob3J0Y3V0IHRvIHJ1bGUgdGhlbSBhbGwgaXMgPGtiZD5BbHQ8L2tiZD4gKyA8a2JkPlNoaWZ0PC9rYmQ+ICsgPGtiZD5LPC9rYmQ+IHdoaWNoIGlzIHRoZSBzaG9ydGN1dCB0byBkaXNwbGF5IG1vc3Qgb2YgdGhlIGluLWJ1aWx0IFJTdHVkaW8ga2V5Ym9hcmQgc2hvcnRjdXRzLgoKT3RoZXIgdXNlZnVsIHNob3J0Y3V0cwoKS2V5cyB8IHByb2R1Y2VzCi0tLXwtLS0KPGtiZD5DdHJsPC9rYmQ+ICsgPGtiZD5TaGlmdDwva2JkPiArIDxrYmQ+TTwva2JkPiB8ICU+JQo8a2JkPkFsdDwva2JkPiArIDxrYmQ+LTwva2JkPiB8IDwtCjxrYmQ+Q3RybDwva2JkPiArIDxrYmQ+U2hpZnQ8L2tiZD4gKyA8a2JkPks8L2tiZD4gfCBrbml0cyBSbWQKPGtiZD5DdHJsPC9rYmQ+ICsgPGtiZD5TaGlmdDwva2JkPiArIDxrYmQ+RjEwPC9rYmQ+IHwgUmVzdGFydCBSCjxrYmQ+Q3RybDwva2JkPiArIDxrYmQ+QWx0PC9rYmQ+ICsgPGtiZD5JPC9rYmQ+IHwgSW5zZXJ0IGNvZGUgY2h1bmsKPGtiZD5DdHJsPC9rYmQ+ICsgPGtiZD5TaGlmdDwva2JkPiArIDxrYmQ+Uzwva2JkPiB8IFNvdXJjZSBhY3RpdmUgZmlsZQo8a2JkPkN0cmw8L2tiZD4gKyA8a2JkPi48L2tiZD4gfCBHbyB0byBmaWxlL2Z1bmN0aW9uCjxrYmQ+QWx0PC9rYmQ+ICsgPGtiZD5TaGlmdDwva2JkPiArIDxrYmQ+Rzwva2JkPiB8IEp1bXAgdG8gbGluZQoKTWFrZSB5b3VyIG93bi4uLgoKVG9vbHMgLT4gTW9kaWZ5IEtleWJvYXJkIFNob3J0Y3V0cwoKXAoKIyMjIFNjcmlwdHMKCldoZW4gd2UncmUgdGhpbmtpbmcgYWJvdXQgb3VyIHByb2plY3QgYW5kIGhvdyB3ZSB3YW50IHRvIG9wZXJhdGUsIHRoaXMgYWxzbyBpbnZvbHZlcyBlc3RhYmxpc2hpbmcgdGhlIHN0cnVjdHVyZSBvZiBob3cgeW91IHdhbnQgdG8gY2FwdHVyZSB5b3VyIGNvZGUuIEl0IGNhbiBiZSB1c2VmdWwgdG8gc2VwYXJhdGUgc3RlcHMgb2YgeW91ciBwcm9qZWN0IGludG8gdGhlaXIgb3duIHNjcmlwdC4gV2hlbiBkb2luZyB0aGlzLCBpdCBpcyByZWNvbW1lbmRlZCB0byBwcmVmaXggdGhlIG5hbWVzIG9mIHRoZSBzY3JpcHRzIHdpdGggYSBudW1iZXIgd2hpY2ggaW5kaWNhdGVzIHRoZSBvcmRlciBpbiB3aGljaCB0aGUgc2NyaXB0cyBhcmUgZGVzaWduZWQgdG8gYmUgcnVuLiBUaGlua2luZyBhYm91dCBhbmQgY3JlYXRpbmcgdGhpcyBzdHJ1Y3R1cmUgb2YgZG9jdW1lbnRzIGZyb20gdGhlIHN0YXJ0IGNhbiBoZWxwIHdpdGggdGhlIGRldmVsb3BtZW50IHByb2Nlc3MgYXMgYWdhaW4sIHdlJ3JlIGdyb3VwaW5nIHNpbWlsYXIgdGhpbmdzIG1ha2luZyBpdCBlYXNpZXIgdG8ga25vdyB3aGVyZSB0byBsb29rIGxhdGVyIG9uLgoKVGhlIGNob2ljZSBvZiBhIHBsYWluIFIgc2NyaXB0IG9yIHVzaW5nIHNvbWV0aGluZyBsaWtlIFJNYXJrZG93biBjYW4gb2Z0ZW4gY29tZSBkb3duIHRvIGhvdyBtdWNoIHlvdSB3YW50IHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSBleHRyYSBmdW5jdGlvbmFsaXR5IHN1Y2ggYXMgZW1iZWRkaW5nIG9mIGZpZ3VyZXMvdGFibGVzIG9yIGZvcm1hdHRpbmcgb2YgdGV4dC4KCkFuIFJNYXJrZG93biBjYW4gYmUgYSBnb29kIGZvcm1hdCBmb3IgY3JlYXRpbmcgYSAibWFpbiIgd29ya2Zsb3cgZG9jdW1lbnQgdGhhdCBkZXNjcmliZXMgdGhlIGluZGl2aWR1YWwgc3RlcHMgb2YgeW91ciB3b3JrZmxvdyBhbmQgY2FuIHVzZSBgc291cmNlYCBvbiBSIHNjcmlwdHMgdGhhdCBhY3R1YWxseSBkbyB0aGUgdGFza3MgKGUuZy5gc291cmNlKCJzY3JpcHRuYW1lLlIpYCkuIFRoaXMgc3RhcnRzIHRvIGJyaW5nIGFuIGFzcGVjdCBvZiBtb2R1bGFyaXR5IHRvIHlvdXIgY29kZSBhbmQgZW5hYmxlcyB5b3UgdG8gcmV1c2UgdGhlICdtb2R1bGVzJyBpbiBvdGhlciBkb2N1bWVudHMuIEFzIHByb2plY3RzIGdyb3csIGFpbWluZyBmb3IgbW9kdWxhcml0eSBpcyBnb29kLCBhcyBpdCBzdGFydHMgdG8gY29uc29saWRhdGUgeW91ciBjb2RlIGJhc2UgbWFraW5nIGl0IGVhc2llciB0byBtYWludGFpbiBhbmQgcmV1c2UuIFJldXNpbmcgY29kZSB0aGF0IGhhcyBiZWVuIHRlc3RlZCBjYW4gcmVkdWNlIGRldmVsb3BtZW50IHRpbWUgYW5kIHRoZSBsaWtlbGlob29kIG9mIGVycm9ycy4KClwKCiMjIyBJbml0aWFsaXNlIFZlcnNpb24gQ29udHJvbAoKVGhpcyBzZWN0aW9uIGlzIGEgdmVyeSBicmllZiBvdmVydmlldyBvZiB2ZXJzaW9uIGNvbnRyb2wsIHNwZWNpZmljYWxseSB0byBzYXkgdGhhdCB5b3Ugc2hvdWxkIHN0YXJ0IHRvIGJ1aWxkIGl0IGludG8geW91ciB3b3JrZmxvdyBhbmQgd2UnbGwgdG91Y2ggb24gaXQgYWdhaW4gaW4gdGhlIFtBdXRvbWF0aW5nIFZlcnNpb24gQ29udHJvbF0oI2F1dG8tdmMpIHNlY3Rpb24gYnV0IHVsdGltYXRlbHkgdGhlIGRldGFpbHMgYXJlIG91dHNpZGUgb2YgdGhlIHNjb3BlIG9mIHRoaXMgY291cnNlIGFzIHRoZXkgdGFrZSBhIGNvdXJzZSBvZiB0aGVpciBvd24gdG8gY29udmV5LgoKWW91IGFyZSBsaWtlbHkgZmFtaWxpYXIgd2l0aCB2ZXJzaW9uaW5nLCB1c3VhbGx5IHBlb3BsZSB0cnkgdG8gYWNoaWV2ZSB0aGlzIHRocm91Z2ggZmlsZSBuYW1lcy4gVGhpcyBpcyBvayB0byBhIHBvaW50IGJ1dCBjYW4gY3VtYmVyc29tZSBhbmQgZG9lc24ndCBzY2FsZSB3ZWxsIGFjcm9zcyBtdWx0aXBsZSBmaWxlcyBub3IgZG9lcyBpdCBnaXZlIHlvdSBhbiBlYXN5IHdheSB0byBzZWUgZXhhY3RseSB3aGF0IHRoZSBkaWZmZXJlbmNlcyB3ZXJlIGJldHdlZW4gdGhvc2UgZmlsZXMuIFRoaXMgaXMgd2hlcmUgdXNpbmcgdmVyc2lvbiBjb250cm9sIHNvZnR3YXJlIHN1Y2ggYXMgYGdpdGAgY2FuIG1ha2UgeW91ciBsaWZlIGVhc2llci4KCkl0J3MgYWx3YXlzIGEgZ29vZCBpZGVhIHRvIGdldCB0aGlzIHNldCB1cCBiZWZvcmUgeW91IGdldCB1bmRlciB3YXkgZG9pbmcgYWN0dWFsIHdvcmsgc28gdGhhdCB5b3UgY2FuIHRyYWNrIHlvdSBjaGFuZ2VzIGZyb20gdGhlIHRoZSB2ZXJ5IHN0YXJ0LiBJbiB0aGUgY2FzZSBvZiBgZ2l0YCwgZm9sbG93aW5nIFtIYXBweSBHaXQgd2l0aCBSXShodHRwczovL2hhcHB5Z2l0d2l0aHIuY29tKSBmb3IgaW5zdGFsbGluZyBhbmQgY29uZmlndXJpbmcgYGdpdGAgYW5kIHN1YnNlcXVlbnRseSB0ZWxsaW5nIFJTdHVkaW8gYWJvdXQgeW91ciBpbnN0YWxsYXRpb24gaXMgYSBnb29kIHBsYWNlIHRvIHN0YXJ0LgoKT25jZSB5b3UgaGF2ZSBSU3R1ZGlvIHNldCB1cCB3aXRoIGBnaXRgLCB3aGVuIHlvdSBhZGQgKGluaXRpYWxpc2UpIHZlcnNpb24gY29udHJvbCBvbnRvIHlvdXIgcHJvamVjdCwgeW91J2xsIGhhdmUgYSBuZXcgdGFiIGFwcGVhciBhbmQgYSBoaWRkZW4gZGlyZWN0b3J5IGNhbGxlZCBgLmdpdGAgd2lsbCBiZSBjcmVhdGVkIGluc2lkZSB5b3VyIHByb2plY3QgZGlyZWN0b3J5LiBBIGRpcmVjdG9yeSB1bmRlciB2ZXJzaW9uIGNvbnRyb2wgaXMgY2FsbGVkIGEgJ3JlcG9zaXRvcnknIG9yICdyZXBvJy4gVGhlc2UgcmVwb3NpdG9yaWVzIHN0b3JlZCBsb2NhbGx5IG9uIHlvdXIgbWFjaGluZSBjYW4gYmUgdXBsb2FkZWQgdG8gcmVtb3RlLCBvbmxpbmUgY29kZSByZXBvc2l0b3J5IHdlYnNpdGVzLiBTb21lIHBvcHVsYXIgb25lcyBhcmUgW0dpdEh1Yl0oaHR0cHM6Ly9naXRodWIuY29tKSwgW0dpdExhYl0oaHR0cHM6Ly9naXRsYWIuY29tKSwgb3IgW0JpdEJ1Y2tldF0oaHR0cHM6Ly9iaXRidWNrZXQuY29tKS4gVGhlc2Ugb25saW5lIHNpdGVzIG9mZmVyIHRoZSBhYmlsaXR5IHRvIGNyZWF0ZSBhbmQgc3RvcmUgcHVibGljIG9yIHByaXZhdGUgcmVwb3NpdG9yaWVzLgoKYGBge3IsIGVjaG89RkFMU0UsIGZpZy5hbGlnbj0nY2VudGVyJ30KaW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzLzA5LWdpdF9wYW5lbC5wbmciKQpgYGAKClZlcnNpb24gY29udHJvbCBpcyB1c2VkIGZvciBrZWVwaW5nIHRyYWNrIG9mIHRoZSBjaGFuZ2VzIG1hZGUgdG8geW91ciBzY3JpcHRzLCB3ZSBkb24ndCB1c3VhbGx5IHVzZSBpdCB0byBtYW5hZ2Ugb3VyIGRhdGEgLSBzaW5jZSBvdXIgaW5pdGlhbCByYXcgZGF0YSBpc24ndCBnb2luZyB0byBiZSBjaGFuZ2luZy4gRm9yIG1hbmFnaW5nIGRhdGEsIHdlIHVzZSBhbiBhcHByb3ByaWF0ZSBiYWNrdXAgb3IgYXJjaGl2aW5nIHN5c3RlbS4KClwKCiMjIFRlc3RpbmcgYW5kIEFkanVzdGluZwoKT25jZSB0aGluZ3MgYXJlIHNldCB1cCwgd2UncmUgcmVhZHkgdG8gYWN0dWFsbHkgc3RhcnQgZG9pbmcgdGhlIHdvcmsgd2Ugd2FudCB0byBkby4gQXMgd2UgZGV2ZWxvcCBvdXIgY29kZSBob3dldmVyLCB3ZSBjb25zdGFudGx5IGN5Y2xlIHRocm91Z2ggdGVzdGluZyBhbmQgYWRqdXN0aW5nLiBFYWNoIHBpZWNlIG9mIGNvZGUgd2Ugd3JpdGUgbmVlZHMgdG8gYmUgY2hlY2tlZCB0aGF0IGl0IGlzIHdvcmtpbmcgY29ycmVjdGx5LiBPZnRlbiB0aGlzIHR5cGUgb2YgdGVzdGluZyBpcyBwZXJmb3JtZWQgbWFudWFsbHkgYXMgeW91IGNyZWF0ZSBpdCBhbmQgdHJ5IHRvIHJ1biBpdCBhc2tpbmcgJ2RvZXMgdGhlIGxpbmUgb2YgY29kZSBydW4/JyAtIGNoZWNraW5nIGZvciBzeW50YXggZXJyb3JzLCBhbmQgdGhlbiAnZG9lcyB0aGUgb3V0cHV0IGxvb2sgcmlnaHQ/Jy4gV2hlbiB0aGUgYW5zd2VyIHRvIHRoZXNlIGVpdGhlciBxdWVzdGlvbiBpcyBubywgd2UgdGhlbiBlbnRlciBhIGRlYnVnZ2luZyBtb2RlIHdoZXJlIHdlIHRyeSBhbmQgZmluZCBvdXQgd2h5IHRoZSBjb2RlIGlzbid0IGRvaW5nIHdoYXQgd2UgdGhpbmsgaXQgc2hvdWxkLiAgIAoKXAoKIyMjIERlYnVnZ2luZwoKCkVycm9ycyBtZXNzYWdlcyBhcmUgY29tbW9uIHdoZW4gY29kaW5nIGFuZCBhcmUgYSB3YXkgdGhlIGNvbXB1dGVyIGNvbW11bmljYXRlcyBpdCBkb2Vzbid0IHVuZGVyc3RhbmQgd2hhdCB0aGUgaW5zdHJ1Y3Rpb25zIGl0IGhhcyBiZWVuIGdpdmVuIGFyZS4KQ29tbW9uIHR5cGVzIG9mIGVycm9ycyB3ZSBlbmNvdW50ZXIgYXJlOgoKLSBzeW50YWN0aWNhbAotIGxvZ2ljYWwKLSBydW50aW1lCgpTeW50YWN0aWNhbCBlcnJvcnMgYXJlIHVzdWFsbHkgdGhlIG1vc3Qgc3RyYWlnaHQgZm9yd2FyZCwgdGhlIGNvbXB1dGVyIHNheXMgdGhhdCBubyBzdHJhaWdodCBhd2F5IGR1ZSB0byBpbXByb3BlciBzeW50YXguIFRoZXNlIGFyZSB1c3VhbGx5IHRoZSBlYXNpZXN0IHRvIGZpbmQgYW5kIGNvcnJlY3QuIAoKTG9naWNhbCBlcnJvcnMgY29tZSBhYm91dCB0aHJvdWdoIGluY29ycmVjdCBpbXBsZW1lbnRhdGlvbiBvZiBsb2dpYy4gVGhlIGNvbXB1dGVyIHdpbGwgcnVuIHRoZSBjb2RlIHdpdGhvdXQgY29tcGxhaW50IGJ1dCB0aGUgcmVzdWx0IGlzbid0IGNvcnJlY3QgLSB0aGVzZSBjYW4gYmUgdHJpY2t5IHRvIGZpbmQgYW5kIGZpeCBiZWNhdXNlIHRoZXkgb2Z0ZW4gaW52b2x2ZSBjaGVja2luZyBlYWNoIGxvZ2ljYWwgc3RhdGVtZW50IGFuZCBzdWJzZXF1ZW50IGNvZGUgcGF0aHdheSBpbiBvcmRlciB0byB0cmFjayBkb3duIHdoYXQgaXMgZ29pbmcgd3JvbmcuIAoKUnVudGltZSBlcnJvcnMgYXJlIGVycm9ycyB3aGVyZSB5b3UgYXJlIHRyeWluZyB0byBtYWtlIHRoZSBjb21wdXRlciBkbyBzb21ldGhpbmcgaXQgY2FuJ3QgaW4gY2VydGFpbiBzaXR1YXRpb25zLCBzdWNoIGFzIHN0b3JpbmcgYSByZXN1bHQgaW4gYSBjZXJ0YWluIGxvY2F0aW9uLiBUaGUgY29kZSB3aWxsIHJ1biBzb21ldGltZXMgYnV0IG5vdCBvdGhlcnMgYW5kIGFnYWluIHRoZXkgY2FuIGJlIHRyaWNreSB0byB0cmFjayBkb3duLiAKClJlbWVtYmVyLCBlYWNoIHRpbWUgd2UgZmluZCBhbmQgZml4IGFuIGVycm9yLCB3ZSBtdXN0IHJldGVzdC4gVGhpcyBjYW4gZ2V0IHF1aXRlIGxhYm9yaW91cyB0byBkbyBtYW51YWxseSBzbyB3ZSBjYW4gZmluZCBiZXR0ZXIgc3lzdGVtcyB0byBoZWxwIHN1Y2ggYXMgW2F1dG9tYXRpYyB0ZXN0aW5nXSgjYXV0b21hdGljLXRlc3RzKSBidXQgZmlyc3Qgd2UnbGwgY292ZXIgc29tZSBnZW5lcmFsIHByaW5jaXBsZXMgb24gaG93IHRvIGdvIGFib3V0IGRlYnVnZ2luZy4KCgoKYGBge3IsIGVjaG8gPSBGQUxTRSwgb3V0LmhlaWdodCA9ICc1MCUnLCBvdXQud2lkdGg9JzUwJScsIGZpZy5jYXAgPSAiaHR0cHM6Ly94a2NkLmNvbS8xNzM5LyIsIGZpZy5hbGlnbj0nY2VudGVyJ30Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wOS1maXhpbmdfcHJvYmxlbXMucG5nIikKYGBgCgpcCgojIyMjIFdoZXJlIGRvIEkgc3RhcnQ/CgpLbm93aW5nIHdoZXJlIHRvIHN0YXJ0IGRlYnVnZ2luZyB0YWtlcyBwcmFjdGljZS4gU29tZSBnZW5lcmFsIGdvb2QgYWR2aWNlIGNhbiBiZSBmb3VuZCBpbiBodHRwczovL2Fkdi1yLmhhZGxleS5uei9kZWJ1Z2dpbmcuaHRtbCB3aXRoIHNvbWUgc3BlY2lmaWMgdGlwcyBhbmQgdHJpY2tzIGZvciBSLiBUaGUgZ2VuZXJhbCBwcmVtaXNlIGlzIHRoYXQgd2Ugd2FudCB0byB0ZXN0IGFuZCBjb25maXJtIGFsbCBvZiBvdXIgYXNzdW1wdGlvbnMuCgo+IEZpbmRpbmcgeW91ciBidWcgaXMgYSBwcm9jZXNzIG9mIGNvbmZpcm1pbmcgdGhlIG1hbnkgdGhpbmdzIHRoYXQgeW91IGJlbGlldmUgYXJlIHRydWUg4oCUIHVudGlsIHlvdSBmaW5kIG9uZSB3aGljaCBpcyBub3QgdHJ1ZS4KPgo+IOKAlCBOb3JtIE1hdGxvZmYKClNvbWUgdGVjaG5pcXVlcyBmb3Igc29sdmluZyBlcnJvcnMgYW5kIGNvbmZpcm1pbmcgb3VyIGFzc3VtcHRpb25zIGNhbiBpbmNsdWRlOgoKCi0gdXNpbmcgcHJpbnQgc3RhdGVtZW50cyB0byBjb25maXJtIHZhbHVlcyBhdCBrZXkgc3RhZ2VzCi0gZ29vZ2xpbmcgdGhlIGVycm9yIG1lc3NhZ2UKLSByZXN0YXJ0IFIgYW5kIHJlcnVuIHRoZSBjb2RlCi0gcmVhZGluZyB0aGUgZG9jdW1lbnRhdGlvbgotIHRhbGsgdGhyb3VnaCB0aGUgcHJvYmxlbQoKCmBgYHtyLCBlY2hvID0gRkFMU0UsIG91dC53aWR0aCA9ICc1MCUnLCBvdXQuaGVpZ2h0ID0gJzUwJScsIGZpZy5hbGlnbj0nY2VudGVyJ30Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wOS1ydWJiZXJkdWNrLmpwZyIpCmBgYAoKJ1J1YmJlciBkdWNrIGRlYnVnZ2luZycgaXMgYSB0ZWNobmlxdWUgd2hpY2ggaW52b2x2ZXMgdGFsa2luZyB5b3VyIHdheSB0aHJvdWdoIHdoYXQgeW91IGFyZSB0cnlpbmcgdG8gYWNoaWV2ZSB3aXRoIHlvdXIgY29kZSBhbmQgZXhwbGFpbmluZyB3aGF0IHlvdXIgY29kZSBpcyBhY3R1YWxseSBkb2luZyBhdCBlYWNoIHN0ZXAgdG8gYSBydWJiZXIgZHVjayAob3Igb3RoZXIgdG95KS4gT2Z0ZW4gYnkgYmVpbmcgc3lzdGVtYXRpYyBhbmQgc2F5aW5nIG91dCBsb3VkIHdoYXQgaXMgaGFwcGVuaW5nIHRoaXMgd2lsbCB0cmlnZ2VyIGFuICJhLWhhIiBtb21lbnQgYXMgdG8gd2hhdCBpcyBjYXVzaW5nIHRoZSBpc3N1ZS4gWW91IGNhbiBhbHNvIHVzZSB0aGlzIHRlY2huaXF1ZSB3aXRoIGFub3RoZXIgcGVyc29uIGUuZy4gY28td29ya2VyIGluc3RlYWQgb2YgYSB0b3kgaWYgeW91IHByZWZlci4KClwKCiMjIyMgR2VuZXJhbCBwcm9jZXNzCgpNeSBnZW5lcmFsIHByb2Nlc3MgZm9jdXNlcyBvbiB0aGUgaW5pdGlhbCBzb3VyY2Ugb2YgdGhlIGVycm9yIGFuZCB0aGVuIHN0YXJ0cyB0byB3b3JrIGJhY2t3YXJkcyBpbiBjb21tYW5kIGhpc3RvcnkuCgoxLiBEbyBJIHJlY29nbmlzZSB0aGUgbWVzc2FnZT8KMi4gUmUtbG9vayBhdCB0aGUgY29tbWFuZCBJIHJhbiBsb29raW5nIGZvcgogICAgLSB0eXBvcwogICAgLSBtaXNzaW5nIHN5bnRheCAoZS5nLiBicmFja2V0cywgc2VtaWNvbG9ucywgZXRjLikKICAgIC0gY29ycmVjdCBuYW1pbmcgb2YgdGhpbmdzCjMuIElzIHRoZSBpbnB1dCBmb3IgbXkgY29tbWFuZCB3aGF0IEkgZXhwZWN0IGl0IGlzPwo0LiBEaWQgdGhlIHByZXZpb3VzIGNvbW1hbmQgcnVuIHByb3Blcmx5PwogICAgLSBpZiBub3QganVtcCB0byAxLiBmb3IgdGhlIHByZXZpb3VzIGNvbW1hbmQKClwKCiMjIyMgR2V0dGluZyB0byBrbm93IHNvbWUgZXJyb3JzCgpSIGlzIG5vdG9yaW91cyBmb3IgaGF2aW5nIG1lc3NhZ2VzIHRoYXQgYXJlIG5vdCB1c2VyIGZyaWVuZGx5LiBMZXRzIGxvb2sgYXQgYSBmZXcgY29tbW9uIFIgZXJyb3JzIGFuZCB3YXJuaW5ncyBzbyB0aGF0IHdlIGNhbiBiZWNvbWUgbW9yZSBmYW1pbGlhciB3aXRoIGEpIHdoYXQgdGhleSBsb29rIGxpa2UsIGIpIGhvdyB0byBmaW5kIHRoZSB1c2VmdWwgYml0cwoKKipBbmF0b215IG9mIGEgbWVzc2FnZSoqCgoxLiBVc3VhbGx5IHRoZSBmaXJzdCB3b3JkIGlzICJFcnJvciIsIGJ1dCBzb21ldGltZXMgaXQgY2FuIGJlICJXYXJuaW5nIi4gQ29kZSB0aGF0IHByb2R1Y2VzIGVycm9ycyB3b24ndCBydW4uIENvZGUgdGhhdCBwcm9kdWNlcyB3YXJuaW5ncyB3aWxsIHJ1biBidXQgaXMgc2lnbmlmeWluZyB0aGF0IHlvdSBzaG91bGQgYmUgZXh0cmEgY2FyZWZ1bCBhYm91dCB0aGUgb3V0cHV0IGJlY2F1c2UgaXQgbWlnaHQgbm90IGJlIGRvaW5nIHdoYXQgeW91IHRoaW5rIGl0IGlzLiAKMi4gSW1tZWRpYXRlbHkgZm9sbG93aW5nIGlzIHRoZSBleGFjdCBjb2RlIHRoYXQgaXMgcHJvZHVjaW5nIHRoZSBlcnJvci93YXJuaW5nLiBUaGlzIHRlbGxzIHlvdSB3aGVyZSB0byBzdGFydCBsb29raW5nLgozLiBhZnRlciB0aGUgYDpgIGdpdmVzIHRoZSBkZXRhaWxzIGFib3V0IHdoYXQgdGhlIGVycm9yL3dhcm5pbmcgYWN0dWFsbHkgaXMuIAoKYGBge3IsIGV2YWwgPSBUUlVFLCBlcnJvciA9IFRSVUUsIHdhcm5pbmcgPSBUUlVFLCByZXN1bHRzPSdoaWRlJ30KbXlfdmFyCmBgYAoKQ2F1c2VkIGJ5IHRyeWluZyB0byBhY2Nlc3MgYSB2YXJpYWJsZSB0aGF0IGhhc24ndCBiZWVuIGRlZmluZWQgeWV0LgoKYGBge3IsIGV2YWwgPSBUUlVFLCBlcnJvciA9IFRSVUUsIHdhcm5pbmcgPSBUUlVFLCByZXN1bHRzPSdoaWRlJ30KbWVhblsyXQpgYGAKCkNhdXNlZCBieSB1c2luZyB0aGUgc3Vic2V0dGluZyBicmFja2V0cyBgW11gIGluc3RlYWQgb2YgYCgpYCB3aGljaCBhcmUgdXNlZCBmb3IgYSBmdW5jdGlvbi4KCmBgYHtyLCBldmFsID0gVFJVRSwgZXJyb3IgPSBUUlVFLCB3YXJuaW5nID0gVFJVRSwgcmVzdWx0cz0naGlkZSd9CmEgPC0gYyhvbmUgPSAxLHR3byA9IDIsIHRocmVlID0gMykKYSRvbmUKYGBgCgpZb3UgY2FuJ3QgdXNlIGAkYCBvbiBhbiBhdG9taWMgdmVjdG9yLCBpdCdzIHVzZWQgb24gc3RydWN0dXJlcyBzdWNoIGFzIGRhdGEuZnJhbWVzIG9yIGxpc3RzLgoKYGBge3IsIGV2YWwgPSBUUlVFLCBlcnJvciA9IFRSVUUsIHdhcm5pbmcgPSBUUlVFLCByZXN1bHRzPSdoaWRlJ30KYVtbMjBdXQpgYGAKCkNhdXNlZCBieSB0cnlpbmcgdG8gYWNjZXNzIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXggdGhhdCBkb2Vzbid0IGV4aXN0LgoKYGBge3IsIGV2YWwgPSBUUlVFLCBlcnJvciA9IFRSVUUsIHdhcm5pbmcgPSBUUlVFLCByZXN1bHRzPSdoaWRlJ30KcmVhZC5jc3YoIm15ZmlsZS5jc3YiKQpgYGAKCkNhdXNlZCBieSBwcm92aWRpbmcgYSBmaWxlIG5hbWUgdGhhdCBSIGNhbm5vdCBmaW5kIGluIHRoZSB3b3JraW5nIGRpcmVjdG9yeS4KCmBgYHtyLCBldmFsID0gVFJVRSwgZXJyb3IgPSBUUlVFLCB3YXJuaW5nID0gVFJVRSwgcmVzdWx0cz0naGlkZSd9CmdncGxvdCgpCmBgYAoKQ2F1c2VkIGJ5IG5vdCBoYXZpbmcgYSBgZ2dwbG90YCBmdW5jdGlvbiBlaXRoZXIgdXNlciBkZWZpbmVkIGluIHRoZSBlbnZpcm9ubWVudCBvciBub3QgbG9hZGVkIGEgbGlicmFyeSB0aGF0IGNvbnRhaW5zIGl0IChgZ2dwbG90MmAgb3IgYHRpZHl2ZXJzZWApLgoKYGBge3IsIGV2YWwgPSBUUlVFLCBlcnJvciA9IFRSVUUsIHdhcm5pbmcgPSBUUlVFLCByZXN1bHRzPSdoaWRlJ30Kbm90YXBhY2thZ2U6Om5vdGFmdW5jdGlvbigpCmBgYAoKQ2F1c2VkIGJ5IHRyeWluZyB0byBjYWxsIGEgZnVuY3Rpb24gZnJvbSBhIHBhY2thZ2UgdGhhdCBkb2Vzbid0IGV4aXN0IGlzIG5vdCBiZSBpbnN0YWxsZWQgb24gdGhlIGxpYnJhcnkgcGF0aC4KCmBgYHtyLCBldmFsID0gVFJVRSwgZXJyb3IgPSBUUlVFLCB3YXJuaW5nID0gVFJVRSwgcmVzdWx0cz0naGlkZSd9CmlmKE5BKXsKICBwcmludCgid2FzIE5BIikKfQpgYGAKCmBpZmAgcmVxdWlyZXMgdGhlIHJlc3VsdCB0byBiZSBUUlVFIG9yIEZBTFNFLCBgTkFgIGlzbid0IGEgVFJVRSBvciBGQUxTRS4KCgpgYGB7ciwgZXZhbCA9IFRSVUUsIGVycm9yID0gVFJVRSwgd2FybmluZyA9IFRSVUUsIHJlc3VsdHM9J2hpZGUnfQppZihjKDMgPiBjKDEsMiwzKSkpewogIHByaW50KCJsZXNzIHRoYW4gdGhyZWUiKQp9CgppZihjKDEsMiwzKSA+IDMpewogIHByaW50KCJsZXNzIHRoYW4gb25lIikKfQpgYGAKCmBpZmAgcmVxdWlyZXMgYSBzaW5nbGUgVFJVRSBvciBGQUxTRSByZXN1bHQsIHRoZXNlIHN0YXRlbWVudHMgY3JlYXRlIG11bHRpcGxlLiBJbiBvbGRlciB2ZXJzaW9ucyBvZiBSIHRoaXMgcHJvZHVjZWQgYSB3YXJuaW5nIGFuZCBub3QgYW4gZXJyb3IuCgpgYGB7ciwgZXZhbCA9IFRSVUUsIGVycm9yID0gVFJVRSwgd2FybmluZyA9IFRSVUUsIHJlc3VsdHM9J2hpZGUnfQptZWFuKGMoIjEiLCAiMiIpKQpgYGAKCkNhdXNlZCBieSB0aGUgYSBkYXRhIHR5cGUgdGhhdCBkb2Vzbid0IGNvZXJjZSBpbnRvIGEgbnVtZXJpYyBhdXRvbWF0aWNhbGx5LgoKXAoKIyMjIEFkanVzdGluZwoKSW4gdGhlIHByb2Nlc3Mgb2YgZGV2ZWxvcGluZywgaXQncyBhbHNvIGltcG9ydGFudCB0byB0YWtlIG9wcG9ydHVuaXRpZXMgdG8gYWRqdXN0IGhvdyB0aGluZ3MgYXJlIGJlaW5nIGRvbmUuIFdvcmtpbmcgY29kZSBpcyBiZXR0ZXIgdGhhbiBubyBjb2RlLCBidXQgYXMgeW91IGNyZWF0ZSBtb3JlIGNvZGUgaXQncyBhbHNvIGEgZ29vZCBpZGVhIHRvIGV2ZXJ5IHNvIG9mdGVuIGxvb2sgZm9yIG9wcG9ydHVuaXRpZXMgdG8gbWFrZSB0aGluZ3MgYmV0dGVyIC0gZWZmaWNpZW5jeSBvciBtYWludGVuYW5jZSB3aXNlLgoKQ29kZSByZXBsaWNhdGlvbiBpcyBhIGdvb2QgcGxhY2UgdG8gc3RhcnQgLSBpZiB5b3UndmUgZm91bmQgeW91cnNlbGYgY29weSBhbmQgcGFzdGluZyB0aGUgc2FtZSBjb2RlIG92ZXIgaW4gdGhlIHNhbWUgcHJvamVjdCwgY29uc2lkZXIgbWFraW5nIGl0IGludG8gYSBmdW5jdGlvbi4gVGhpcyB0aGVuIGdpdmVzIHlvdSBhIHNpbmdsZSBwbGFjZSB0aGF0IG5lZWRzIHRvIGJlIGNoYW5nZWQuIElmIHlvdSBmaW5kIHlvdXJzZWxmIGNvcHkgYW5kIHBhc3RpbmcgeW91ciBmdW5jdGlvbnMgYWNyb3NzIHByb2plY3RzLCBjb25zaWRlciBjcmVhdGluZyB5b3VyIG93biBwYWNrYWdlLiBUaGUgInJ1bGUiIG9mIHRocmVlIGNhbiBiZSBiZSBhIGdvb2QgZ3VpZGVsaW5lIGZvciB0aGlzLiBJZiB5b3UndmUgZHVwbGljYXRlZCBhIGxpbmUgb2YgY29kZSAzIG9yIG1vcmUgdGltZXMsIGNvbnNpZGVyIHR1cm5pbmcgaXQgaW50byBhIGZ1bmN0aW9uLiBJZiB5b3UgZHVwbGljYXRlIGEgZnVuY3Rpb24gdGhyZWUgb3IgbW9yZSB0aW1lcywgY29uc2lkZXIgcHV0dGluZyBpdCBpbnRvIGEgcGFja2FnZS4gCgpcCgojIyMjIFJNYXJrZG93biBkcml2ZW4gZGV2CgpFbWlseSBSaWVkZXJlciBoYXMgYSBncmVhdCBibG9nIHBvc3QgYWJvdXQgW1JNYXJrZG93biBkcml2ZW4gZGV2ZWxvcG1lbnRdKGh0dHBzOi8vZW1pbHlyaWVkZXJlci5uZXRsaWZ5LmFwcC9wb3N0L3JtYXJrZG93bi1kcml2ZW4tZGV2ZWxvcG1lbnQvKSB3aGljaCBkZXNjcmliZXMgYSBwcm9jZXNzIG9mIGRldmVsb3BtZW50IHVzaW5nIFJNYXJrZG93biBkb2N1bWVudHMsIHdoZXJlIGZpcnN0IHlvdSBnZXQgdGhpbmdzIHRvIGEgd29ya2luZyBzaXR1YXRpb24sIHRoZW4gZ28gdGhyb3VnaCByb3VuZHMgb2YgdGlkeWluZyB5b3VyIGRvY3VtZW50IGJyaW5naW5nIGxpa2UtdG8tbGlrZSB3aXRoIHlvdXIgY29kZSBzbyB0aGF0IGNvZGUgYmxvY2tzIGNvbnRhaW4gc2ltaWxhciBwcm9jZXNzZXMuIEFzIHRoZSB0aWR5aW5nIGlzIHBlcmZvcm1lZCwgaXQgcHJvdmlkZXMgYW4gb3Bwb3J0dW5pdHkgdG8gYWxzbyByZWR1Y2UgZHVwbGljYXRpb24gb2YgY29kZSBhbmQgaW5jcmVhc2UgdGhlIG1haW50YWluYWJpbGl0eSBieSBjb252ZXJ0aW5nIHByb2Nlc3NlcyBpbnRvIGZ1bmN0aW9ucy4gCgpcCgojIyMjIFBhY2thZ2VzCgpJZiB5b3UgZmluZCB5b3Vyc2VsZiBjb3B5IGFuZCBwYXN0aW5nIGZ1bmN0aW9uIGJldHdlZW4gZG9jdW1lbnRzLCBpdCBtaWdodCBiZSB0aW1lIHRvIHN0YXJ0IGNyZWF0aW5nIHlvdXIgb3duIHBhY2thZ2UsIHRoYXQgd2F5IHlvdSByZWR1Y2UgdGhlIG51bWJlciBvZiBpbmRpdmlkdWFsIHBsYWNlcyB5b3VyIGZ1bmN0aW9uIGlzIGRlZmluZWQgYW5kIHRoaXMgbWFrZXMgaXQgZWFzaWVyIGluIHRoZSBmdXR1cmUgdG8gbWFpbnRhaW4uIFBhY2thZ2VzIGFsc28gYnJpbmcgaW4gYW4gZXh0cmEgbGV2ZWwgb2YgdXRpbGl0eSBpbiB0aGF0IHlvdSBjYW4gaW1wcm92ZSBkb2N1bWVudGF0aW9uIGFuZCBpbXBsZW1lbnQgYXV0b21hdGVkIHRlc3Rpbmcgc28gdGhhdCB5b3Uga25vdyB3aGVuIGNoYW5nZXMgYnJlYWsgZnVuY3Rpb25hbGl0eS4KCklmIHlvdSB3YW50IHRvIGxvb2sgZnVydGhlciBpbnRvIGhvdyB0byBjcmVhdGUgcGFja2FnZXMsIGNoZWNrIG91dCB0aGUgW1IgUGFja2FnZXMgb25saW5lIGJvb2tdKGh0dHBzOi8vci1wa2dzLm9yZy9pbmRleC5odG1sKSBhbmQgeW91IGNhbiB1c2UgYHVzZXRoaXM6OmNyZWF0ZV9wYWNrYWdlKClgIHRvIGNyZWF0ZSBhIG5ldyBwYWNrYWdlIGZyb20gYSB0ZW1wbGF0ZS4gQ29tYmluZWQgd2l0aCB0aGUgW2BkZXZ0b29sc2BdKGh0dHBzOi8vZGV2dG9vbHMuci1saWIub3JnKSBwYWNrYWdlIGl0J3MgcG9zc2libGUgdG8gaGF2ZSBhIGJhc2ljIHBhY2thZ2UgY3JlYXRlZCByZWxhdGl2ZWx5IHF1aWNrbHkgKFtwZXJoYXBzIGluIDIwIG1pbnV0ZXNdKGh0dHBzOi8vd3d3LnJzdHVkaW8uY29tL3Jlc291cmNlcy9yc3R1ZGlvY29uZi0yMDE4L3lvdS1jYW4tbWFrZS1hLXBhY2thZ2UtaW4tMjAtbWludXRlcy1qaW0taGVzdGVyLykuIElmIHlvdSdyZSBmaW5kaW5nIHlvdXJzZWxmIGNyZWF0aW5nIGZ1bmN0aW9ucyB0aGF0IHlvdSBhcmUgdXNpbmcgaW4gbWFueSBwcm9qZWN0cywgdGhlIHRpbWUgaW52ZXN0bWVudCB0byBsZWFybiBob3cgdG8gY3JlYXRlIGEgcGFja2FnZSBpcyB3ZWxsIHdvcnRoIGl0LiAgCgpcCgojIyBBdXRvbWF0aW5nCgpBcyB5b3UgZ28gYWJvdXQgZGV2ZWxvcGluZywgdGhlcmUgYXJlIHR3byBtYWluIHRoaW5ncyB5b3Ugd2lsbCBmaW5kIHlvdXJzZWxmIGRvaW5nIG92ZXIgYW5kIG92ZXIgYWdhaW4gLSB0cnlpbmcgdG8gcmVtZW1iZXIgd2hhdCB5b3UgaGF2ZSBjaGFuZ2VkLCBhbmQgbWFraW5nIHN1cmUgdGhhdCBhbnkgY2hhbmdlcyBoYXZlbid0IGJyb2tlbiBhbnl0aGluZy4gVGhlc2UgcHJvY2Vzc2VzIGNhbiBiZSBxdWl0ZSB0aW1lIGludGVuc2l2ZSBzbyBpdCdzIHF1aXRlIHVzZWZ1bCB0byB0cnkgYW5kIGF1dG9tYXRlIHRoZSBwaWVjZXMgdGhhdCB5b3UgY2FuLgoKXAoKIyMjIEF1dG9tYXRlZCB0ZXN0aW5nIHsjYXV0b21hdGljLXRlc3RzfQoKQXMgeW91IGNvZGUgYW5kIG1hbnVhbGx5IHRlc3QsIGl0IGNhbiBiZSBiZW5lZmljaWFsIHRvIGZvcm1hbGlzZSB0aGUgbWFudWFsIHRlc3RzIGludG8gYW4gYXV0b21hdGVkIHNvbHV0aW9uIHNvIHRoYXQgeW91IGNhbiBiZSBtb3JlIGVmZmljaWVudCBhbmQgYWxzbyBlbnN1cmUgdGhhdCB5b3Uga25vdyB3aGVuIHlvdSAnYnJlYWsgdGhpbmdzJyB3aXRoIGZ1dHVyZSBjaGFuZ2VzLiBUaGlzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgd2hlbiB5b3UgZml4IGJ1Z3MgaW4geW91ciBjb2RlLCBjcmVhdGUgYSB0ZXN0IHRoYXQgcmVwbGljYXRlcyB0aGUgY29uZGl0aW9uIHRoYXQgY2F1c2VkIHRoZSBidWcuCgpJbiBSLCBvbmUgc3lzdGVtIHVzZXMgdGhlIHBhY2thZ2UgYHRlc3R0aGF0YCB3aGljaCBwcm92aWRlcyBhIGZyYW1ld29yayB0byBjcmVhdGUgdGhlc2UgZm9ybWFsIHRlc3RzIHdoaWNoIHdpbGwgZXZhbHVhdGUgYSBwaWVjZSBvZiBjb2RlIGFnYWluc3QgdGhlIGtub3duIGV4cGVjdGVkIG91dHB1dCBhbmQgdGVsbCB5b3UgaWYgdGhleSBkb24ndCBtYXRjaC4KCmBgYHtyLCBldmFsID0gRkFMU0V9CgojIGV4cGVjdCBhIG1lYW4gb2YgMgp0ZXN0dGhhdDo6ZXhwZWN0X2VxdWFsKG1lYW4oYygxLDIsMykpLCAyKQpgYGAKCmB0ZXN0dGhhdGAgb3BlcmF0ZXMgYnkgc2V0dGluZyB1cCBleHBlY3RhdGlvbnMgYW5kIHRlc3RpbmcgaWYgdGhleSBob2xkIHRydWUuIElmIHRoZXkgYXJlIHRydWUgdGhlIGV4cGVjdGF0aW9uIGZ1bmN0aW9uIGlzIHNpbGVudCwgaWYgdGh5IGFyZW4ndCBpdCB3aWxsIHRlbGwgeW91IHdoZW4gcnVuLiBUaGlzIGxldHMgeW91IGZvcm1hbGlzZSB0ZXN0cyB0aGF0IHlvdSB3b3VsZCBiZSBydW5uaW5nIG1hbnVhbGx5IGFuZCBhcyB5b3UgbWFrZSBhZGp1c3RtZW50cyB0byB5b3VyIGNvZGUgeW91IGNhbiByZXJ1biB0aGVzZSB0ZXN0cyB0byBjaGVjayB0aGluZ3MgYXJlIHN0aWxsIHdvcmtpbmcuCgpcCgojIyMgQXV0b21hdGluZyBkaWZmZXJlbmNlcyB7I2F1dG8tdmN9CgpWZXJzaW9uIGNvbnRyb2wgc29mdHdhcmUgaXMgc2xpZ2h0bHkgZGlmZmVyZW50IGZyb20gd2hhdCB5b3UgbWlnaHQgaGF2ZSBleHBlcmllbmNlZCB3aXRoIHNvbWV0aGluZyBsaWtlICd0cmFjayBjaGFuZ2VzJyBpbiBNaWNyb3NvZnQgV29yZCB3aGljaCB0cmFja3MgYWxsIGNoYW5nZXMgbGl2ZS4gCgpJbiB0aGUgY2FzZSBvZiBgZ2l0YCwgb25jZSB5b3UgaGF2ZSBldmVyeXRoaW5nIHNldCB1cCBhbmQgY29uZmlndXJlZCB0aGVyZSBpcyBhIChzaW1wbGlmaWVkKSBtaW5pLXdvcmtmbG93IHdoaWNoIGNhbiBiZSBkb25lIGFmdGVyIGNsaWNraW5nIHRoZSAnY29tbWl0JyBidXR0b24gaW4gdGhlIGdpdCB0YWI6CgpgYGB7ciwgZWNobyA9IEZBTFNFLCBmaWcuYWxpZ249J2NlbnRlcid9CmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wOS1jb21taXQucG5nIikKYGBgCgoKCjEuIFRlbGwgYGdpdGAgeW91IHdhbnQgaXQgdG8gdHJhY2sgdGhlIGNoYW5nZXMgb24gYSBmaWxlCjIuIE1ha2Ugc29tZSBjaGFuZ2VzCjMuIFRlbGwgYGdpdGAgeW91IHdhbnQgdG8gaW5jbHVkZSB0aGVzZSBjaGFuZ2VzIGluIGl0cyB0cmFja2luZwogICAgLSBjbGljayB0aGUgJ3N0YWdlZCcgY2hlY2tib3ggb24gdGhlIGZpbGUgaW4gdGhlIGdpdC1jb21taXQgd2luZG93CjQuIFRlbGwgYGdpdGAgdG8gJ3NuYXBzaG90JyB5b3VyIGNoYW5nZXMgYW5kIGluY2x1ZGUgYSBtZXNzYWdlIGFib3V0IHRoZW0KICAgIC0gd3JpdGUgYSBtZXNzYWdlIGFuZCBjbGljayBjb21taXQgaW4gdGhlIGdpdCAtIGNvbW1pdCB3aW5kb3cKNS4gZ28gYmFjayB0byBzdGVwIDIuCgoKCgpXaHkgd291bGQgeW91IGRvIHRoaXMgd29ya2Zsb3c/IEZvciB5b3VyIGZ1dHVyZSBzZWxmLiBFdmVyeSBzbmFwc2hvdCB5b3UgdGFrZSB3aXRoIGBnaXRgIGdpdmVzIHlvdSBhIHBvaW50IGluIHRpbWUgdGhhdCB5b3UgY2FuIHJvbGwgYmFjayB0byBpZiB5b3Ugd2lzaCAtIGZyb20gYSByZXByb2R1Y2liaWxpdHkgcG9pbnQgb2YgdmlldyB0aGlzIGxldHMgeW91IHJ1biBfYW55XyB2ZXJzaW9uIG9mIHlvdXIgY29kZSBhdCBhIHNuYXBzaG90LiBgZ2l0YCBjYW4gYWxzbyBsZXQgeW91IHNlZSBleGFjdGx5IHdoYXQgY2hhbmdlcyB0aGVyZSB3ZXJlIGJldHdlZW4gc25hcHNob3RzIHdoaWNoIGNhbiBiZSBleHRyZW1lbHkgaGVscGZ1bCBmb3IgZGVidWdnaW5nCgpgZ2l0YCBpcyBhIGZhaXJseSBjb21wbGV4IHBpZWNlIG9mIHNvZnR3YXJlIGFuZCBwcm92aWRlcyBtb3JlIGZ1bmN0aW9uYWxpdHkgdGhhbiB0aGlzLCBidXQgZm9yIHN0YXJ0aW5nIG91dCB0aGlzIHdvcmtmbG93IGNvdmVycyB0aGUgbWFpbiBuZWVkIGFuZCB1c2UgY2FzZS4KClwKCiMjIEZpbmFsaXNlCgpDb25ncmF0dWxhdGlvbnMhIFlvdSd2ZSBtYWRlIGl0IHRvIHRoZSBlbmQtc3RhZ2Ugb2YgeW91ciBwcm9qZWN0IHdoZXJlIHlvdSdyZSByZWFkeSB0byB3cmFwIHRoaW5ncyB1cCBhbmQgc2hhcmUgeW91ciBwcm9qZWN0IHdpdGggb3RoZXJzLiBXaGF0IHlvdSBkbyBhdCB0aGlzIHN0YWdlIGVudGlyZWx5IGRlcGVuZHMgb24gd2hhdCBvdXRwdXQgeW91ciBwcm9qZWN0IHdhcyBmb3IuIFBlcmhhcHMgaXQncyBzZW5kaW5nIHlvdXIgZW50aXJlIHByb2plY3QgZGlyZWN0b3J5IHRvIHlvdXIgbGVjdHVyZXIgb3Igc3VwZXJ2aXNvci4gT3IgdGhpcyBjb3VsZCBpbnZvbHZlIHVwbG9hZGluZyB5b3VyIHZlcnNpb24gY29udHJvbGxlZCBjb2RlIHRvIGFuIG9ubGluZSBjb2RlIHJlcG9zaXRvcnkgc3VjaCBhcyBbaHR0cHM6Ly9naXRodWIuY29tXShodHRwczovL2dpdGh1Yi5jb20pIGFuZCBwdWJsaXNoaW5nIHRoZSB1cmwgaW4geW91ciBwYXBlciBvciBvdGhlciBvdXRwdXQuCgpSZWdhcmRsZXNzLCBlbWJyYWNlIHRoZSBjb21wbGV0aW9uLiBUaGVuIGNvbnRpbnVlIG9uIHRvIHlvdXIgbmV4dCBwcm9qZWN0LCBicmluZ2luZyB3aXRoIHlvdSB0aGUgc2tpbGxzIHlvdSBsZWFybnQgb24gdGhpcyBvbmUuCgpcCgojIyBBcHBlbmRpeAoKQW4gZXhhbXBsZSB3b3JrZmxvdyBzZXQgdXAKCmBgYHtyLCBldmFsPUZBTFNFfQojIENyZWF0ZSBhbmQgb3BlbiBhIG5ldyBwcm9qZWN0CnVzZXRoaXM6OmNyZWF0ZV9wcm9qZWN0KHBhdGggPSAifi9teXByb2plY3QiKQoKIyBJbml0aWFsaXNlIHZlcnNpb24gY29udHJvbAp1c2V0aGlzOjp1c2VfZ2l0KCkKCiMgQ3JlYXRlIHRoZSBwcm9qZWN0IHN0cnVjdHVyZQpkaXIuY3JlYXRlKCJkYXRhIikKZGlyLmNyZWF0ZSgic2NyaXB0cyIpCmRpci5jcmVhdGUoIm91dHB1dCIpCmRpci5jcmVhdGUoImRvY3MiKQoKIyBUZWxsIGdpdCB0byBpZ25vcmUgdGhlIGRhdGEgZGlyZWN0b3J5IGJ5IGFkZGluZyBsaW5lOgojIGRhdGEvCnVzZXRoaXM6OmVkaXRfZ2l0X2lnbm9yZSgpCgoKIyBBZGQgYSBSRUFETUUKdXNldGhpczo6dXNlX3JlYWRtZV9tZCgpCgojIEFkZCBNSVQgTGljZW5zZQp1c2V0aGlzOjp1c2VfbWl0X2xpY2Vuc2UoY29weXJpZ2h0X2hvbGRlciA9ICJGaXJzdG5hbWUgTGFzdG5hbWUiKQpgYGAKCgoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("09-workflows.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
